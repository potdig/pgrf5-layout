import{n as f,q as v,Q as O,s as R,R as S}from"./Stack-Ci9wXNEO.js";const u=[];function p(n,s){return{subscribe:z(n,s).subscribe}}function z(n,s=f){let t;const e=new Set;function r(c){if(R(n,c)&&(n=c,t)){const i=!u.length;for(const o of e)o[1](),u.push(o,n);if(i){for(let o=0;o<u.length;o+=2)u[o][0](u[o+1]);u.length=0}}}function a(c){r(c(n))}function d(c,i=f){const o=[c,i];return e.add(o),e.size===1&&(t=s(r,a)||f),c(n),()=>{e.delete(o),e.size===0&&t&&(t(),t=null)}}return{set:r,update:a,subscribe:d}}function b(n,s,t){const e=!Array.isArray(n),r=e?[n]:n;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=s.length<2;return p(t,(d,c)=>{let i=!1;const o=[];let g=0,h=f;const y=()=>{if(g)return;h();const l=s(e?o[0]:o,d,c);a?d(l):h=S(l)?l:f},q=r.map((l,m)=>v(l,I=>{o[m]=I,g&=~(1<<m),i&&y()},()=>{g|=1<<m}));return i=!0,y(),function(){O(q),h(),i=!1}})}const A=window.nodecg,U=p([],n=>{A.Replicant("commentatorArray","speedcontrol-additions").on("change",s=>{n(s)})}),E=n=>b(U,s=>s.filter(t=>t.assignedRunIdArray.includes(n))),B=p([],n=>{A.Replicant("speedcontrolUserAdditionArray","speedcontrol-additions").on("change",s=>{n(s)})}),x=window.nodecg,_=p([],n=>{x.Replicant("runDataArray","nodecg-speedcontrol").on("change",s=>{n(s)})}),w=p(void 0,n=>{x.Replicant("runDataActiveRun","nodecg-speedcontrol").on("change",s=>{n(s)})}),M=b([_,w],([n,s])=>{if(!s)return;const t=n.findIndex(e=>e.id===s.id);return n[t+1]}),Q=b([_,w],([n,s])=>{if(!s)return[];const t=n.findIndex(e=>e.id===s.id);return n.slice(t,t+3)}),j=n=>b([w,B],([s,t])=>{var d,c;const e=((d=t.find(i=>i.id===n))==null?void 0:d.social)??{},r=(c=s==null?void 0:s.teams.flatMap(i=>i.players).find(i=>i.id===n))==null?void 0:c.social.twitch,a={...e};return r&&(a.twitch=r),a});export{w as a,p as b,E as c,b as d,M as n,Q as r,j as s};
