import{n as f,u as z,O as E,s as w,P as O,S as W,i as q,K as F,e as M,b as N,L as T,M as U,N as k,h as v,j as B,f as C,Q as j,R as D,v as G}from"./Stack-CVLjbFSY.js";const d=[];function p(t,n){return{subscribe:K(t,n).subscribe}}function K(t,n=f){let e;const i=new Set;function s(r){if(w(t,r)&&(t=r,e)){const a=!d.length;for(const l of i)l[1](),d.push(l,t);if(a){for(let l=0;l<d.length;l+=2)d[l][0](d[l+1]);d.length=0}}}function o(r){s(r(t))}function c(r,a=f){const l=[r,a];return i.add(l),i.size===1&&(e=n(s,o)||f),r(t),()=>{i.delete(l),i.size===0&&e&&(e(),e=null)}}return{set:s,update:o,subscribe:c}}function b(t,n,e){const i=!Array.isArray(t),s=i?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=n.length<2;return p(e,(c,r)=>{let a=!1;const l=[];let _=0,g=f;const y=()=>{if(_)return;g();const u=n(i?l[0]:l,c,r);o?c(u):g=O(u)?u:f},I=s.map((u,h)=>z(u,R=>{l[h]=R,_&=~(1<<h),a&&y()},()=>{_|=1<<h}));return a=!0,y(),function(){E(I),g(),a=!1}})}const A=window.nodecg,L=p([],t=>{A.Replicant("commentatorArray","speedcontrol-additions").on("change",n=>{t(n)})}),V=t=>b(L,n=>n.filter(e=>e.assignedRunIdArray.includes(t))),P=p([],t=>{A.Replicant("speedcontrolUserAdditionArray","speedcontrol-additions").on("change",n=>{t(n)})}),S=window.nodecg,x=p([],t=>{S.Replicant("runDataArray","nodecg-speedcontrol").on("change",n=>{t(n)})}),m=p(void 0,t=>{S.Replicant("runDataActiveRun","nodecg-speedcontrol").on("change",n=>{t(n)})}),Y=b([x,m],([t,n])=>{if(!n)return;const e=t.findIndex(i=>i.id===n.id);return t[e+1]}),Z=b([x,m],([t,n])=>{if(!n)return[];const e=t.findIndex(i=>i.id===n.id);return t.slice(e,e+3)}),$=t=>b([m,P],([n,e])=>{var c,r;const i=((c=e.find(a=>a.id===t))==null?void 0:c.social)??{},s=(r=n==null?void 0:n.teams.flatMap(a=>a.players).find(a=>a.id===t))==null?void 0:r.social.twitch,o={...i};return s&&(o.twitch=s),o});function Q(t){let n,e;const i=t[3].default,s=F(i,t,t[2],null);return{c(){n=M("span"),s&&s.c()},m(o,c){N(o,n,c),s&&s.m(n,null),t[4](n),e=!0},p(o,[c]){s&&s.p&&(!e||c&4)&&T(s,i,o,o[2],e?k(i,o[2],c,null):U(o[2]),null)},i(o){e||(v(s,o),e=!0)},o(o){B(s,o),e=!1},d(o){o&&C(n),s&&s.d(o),t[4](null)}}}function X(t,n){if(!t)return;const e=parseFloat(t.style.fontSize.replace("em","")),i=t.getBoundingClientRect().width;if(i/e>n)return;const s=n/i;t.style.fontSize=s>1?"":`${s}em`}function H(t,n,e){let{$$slots:i={},$$scope:s}=n,{maxWidth:o=Number.MAX_SAFE_INTEGER}=n,c;j(async()=>{await D(),X(c,o)});function r(a){G[a?"unshift":"push"](()=>{c=a,e(0,c)})}return t.$$set=a=>{"maxWidth"in a&&e(1,o=a.maxWidth),"$$scope"in a&&e(2,s=a.$$scope)},[c,o,s,i,r]}class tt extends W{constructor(n){super(),q(this,n,H,Q,w,{maxWidth:1})}}export{tt as T,m as a,p as b,V as c,b as d,Y as n,Z as r,$ as s};
