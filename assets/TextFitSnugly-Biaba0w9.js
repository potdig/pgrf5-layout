import{n as f,u as z,O as E,s as w,P as O,S as W,i as q,K as F,e as M,b as N,L as T,M as U,N as k,h as v,j as B,f as C,Q as j,R as D,v as G}from"./Stack-CVLjbFSY.js";const d=[];function p(t,n){return{subscribe:K(t,n).subscribe}}function K(t,n=f){let e;const o=new Set;function s(c){if(w(t,c)&&(t=c,e)){const r=!d.length;for(const l of o)l[1](),d.push(l,t);if(r){for(let l=0;l<d.length;l+=2)d[l][0](d[l+1]);d.length=0}}}function i(c){s(c(t))}function a(c,r=f){const l=[c,r];return o.add(l),o.size===1&&(e=n(s,i)||f),c(t),()=>{o.delete(l),o.size===0&&e&&(e(),e=null)}}return{set:s,update:i,subscribe:a}}function b(t,n,e){const o=!Array.isArray(t),s=o?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=n.length<2;return p(e,(a,c)=>{let r=!1;const l=[];let g=0,_=f;const y=()=>{if(g)return;_();const u=n(o?l[0]:l,a,c);i?a(u):_=O(u)?u:f},I=s.map((u,h)=>z(u,R=>{l[h]=R,g&=~(1<<h),r&&y()},()=>{g|=1<<h}));return r=!0,y(),function(){E(I),_(),r=!1}})}const A=window.nodecg,L=p([],t=>{A.Replicant("commentatorArray","speedcontrol-additions").on("change",n=>{t(n)})}),V=t=>b(L,n=>n.filter(e=>e.assignedRunIdArray.includes(t))),P=p([],t=>{A.Replicant("speedcontrolUserAdditionArray","speedcontrol-additions").on("change",n=>{t(n)})}),S=window.nodecg,x=p([],t=>{S.Replicant("runDataArray","nodecg-speedcontrol").on("change",n=>{t(n)})}),m=p(void 0,t=>{S.Replicant("runDataActiveRun","nodecg-speedcontrol").on("change",n=>{t(n)})}),Y=b([x,m],([t,n])=>{if(!n)return;const e=t.findIndex(o=>o.id===n.id);return t[e+1]}),Z=b([x,m],([t,n])=>{if(!n)return[];const e=t.findIndex(o=>o.id===n.id);return t.slice(e,e+3)}),$=t=>b([m,P],([n,e])=>{var i,a;let o=((i=e.find(c=>c.id===t))==null?void 0:i.social)??{};console.log(o);const s=(a=n==null?void 0:n.teams.flatMap(c=>c.players).find(c=>c.id===t))==null?void 0:a.social.twitch;return s&&(o.twitch=s),console.log(o),o});function Q(t){let n,e;const o=t[3].default,s=F(o,t,t[2],null);return{c(){n=M("span"),s&&s.c()},m(i,a){N(i,n,a),s&&s.m(n,null),t[4](n),e=!0},p(i,[a]){s&&s.p&&(!e||a&4)&&T(s,o,i,i[2],e?k(o,i[2],a,null):U(i[2]),null)},i(i){e||(v(s,i),e=!0)},o(i){B(s,i),e=!1},d(i){i&&C(n),s&&s.d(i),t[4](null)}}}function X(t,n){if(!t)return;const e=parseFloat(t.style.fontSize.replace("em","")),o=t.getBoundingClientRect().width;if(o/e>n)return;const s=n/o;t.style.fontSize=s>1?"":`${s}em`}function H(t,n,e){let{$$slots:o={},$$scope:s}=n,{maxWidth:i=Number.MAX_SAFE_INTEGER}=n,a;j(async()=>{await D(),X(a,i)});function c(r){G[r?"unshift":"push"](()=>{a=r,e(0,a)})}return t.$$set=r=>{"maxWidth"in r&&e(1,i=r.maxWidth),"$$scope"in r&&e(2,s=r.$$scope)},[a,i,s,o,c]}class tt extends W{constructor(n){super(),q(this,n,H,Q,w,{maxWidth:1})}}export{tt as T,m as a,p as b,V as c,b as d,Y as n,Z as r,$ as s};
